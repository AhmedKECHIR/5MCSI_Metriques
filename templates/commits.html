<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quantité de commits par minute</title>
<script>
window.onload = function() {
    // URL du fichier JSON contenant les données des commits
    var jsonURL = 'https://api.github.com/repos/OpenRSI/5MCSI_Metriques/commits';

    // Fonction pour récupérer les données JSON
    function fetchCommitsData() {
        return fetch(jsonURL)
            .then(response => response.json())
            .then(data => processData(data))
            .catch(error => console.error('Erreur lors de la récupération des données :', error));
    }

    // Fonction pour traiter les données JSON
    function processData(data) {
        var commits = data.Commit;
        var commitsPerMinute = {};

        // Boucler à travers tous les commits et compter les commits par minute
        commits.forEach(function(commit) {
            var date = new Date(commit.author.date);
            var minute = date.getMinutes();
            if (!commitsPerMinute[minute]) {
                commitsPerMinute[minute] = 0;
            }
            commitsPerMinute[minute]++;
        });

        // Afficher les données
        displayData(commitsPerMinute);
    }

    // Fonction pour afficher les données
    function displayData(commitsPerMinute) {
        var output = document.getElementById('output');
        var html = '<h2>Quantité de commits par minute :</h2><ul>';

        for (var minute in commitsPerMinute) {
            html += '<li>' + minute + ' : ' + commitsPerMinute[minute] + ' commits</li>';
        }
        html += '</ul>';

        output.innerHTML = html;
    }

    // Appeler la fonction pour récupérer les données JSON une fois la page chargée
    fetchCommitsData();
};
</script>
</head>
<body>
<div id="output"></div>
</body>
</html>
